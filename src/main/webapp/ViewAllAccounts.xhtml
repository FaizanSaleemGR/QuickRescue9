<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:b="http://bootsfaces.net/ui">
    <h:head>
	<title>View All Accounts :: Quick Rescue</title>
	<meta name="author" content="Faizan Saleem"></meta>
</h:head>
<h:body>

	<!-- Top Navbar  -->
	<b:navBar brand="QuickRescue" brandHref="#" static="true"
		inverse="true">
		<b:navbarLinks>
			<b:navLink value="Link" href="#"></b:navLink>
			<b:navLink value="Link" href="#"></b:navLink>
			<b:dropMenu value="Dropdown" iconAwesome="birthday-cake">
				<b:navLink value="Action" href="#"></b:navLink>
				<b:navLink value="Another action" href="#"></b:navLink>
				<b:navLink value="Something else here" href="#"></b:navLink>
				<b:navLink></b:navLink>
				<b:navLink header="Nav header"></b:navLink>
				<b:navLink value="Separated link" href="#"></b:navLink>
				<b:dropMenu value="Nested submenu" iconAwesome="birthday-cake"
					iconAlign="right">
					<b:navLink value="You can nest menus" href="#"></b:navLink>
					<b:dropMenu value="Nested sub-submenu">
						<b:navLink value="... as deep as ..." href="#"></b:navLink>
						<b:dropMenu value="Nested sub-sub-submenu">
							<b:navLink value="... you want!" href="#"></b:navLink>
						</b:dropMenu>
					</b:dropMenu>

				</b:dropMenu>
				<b:navLink value="One more separated link" href="#"></b:navLink>
			</b:dropMenu>
		</b:navbarLinks>
		<form class="navbar-form navbar-left hidden-md hidden-sm hidden-xs"
			role="search">
			<div class="form-group">
				<input type="text" class="form-control" />
			</div>
			<button type="submit" class="btn btn-default">Submit</button>
		</form>
		<!-- Following line is needed for TBS 3.0.1 (panel content overflow issue) -->
		<b:navbarLinks pull="right">
			<b:navLink value="    " href="#"></b:navLink>
		</b:navbarLinks>
		<b:navbarLinks pull="right" styleClass="hidden-xs">
			<b:navLink value="Link" href="#"></b:navLink>
			<b:dropMenu value="Dropdown">
				<b:navLink value="Action" href="#"></b:navLink>
				<b:navLink value="Another action" href="#"></b:navLink>
				<b:navLink value="Something else here" href="#"></b:navLink>
				<b:navLink></b:navLink>
				<b:navLink header="Nav header"></b:navLink>
				<b:navLink value="Separated link" href="#"></b:navLink>
				<b:navLink value="One more separated link" href="#"></b:navLink>
			</b:dropMenu>
		</b:navbarLinks>
	</b:navBar>
	
	
	
	<!-- Add New Account Modal  -->  
	<b:modal id="AddNewAccountModal" title="Add New Account" styleClass="modalPseudoClass">
		<b:form id="addAccountForm">
				<b:panel title="Add New Account" look="primary">
					<b:row>
						<b:column>
							<b:inputText placeholder="Account Name" id="newAccountName" value="#{accountController.newAccount.name}" autocomplete="false">
								<f:facet name="prepend">
									<b:icon name="user" />
								</f:facet>
							</b:inputText>
						</b:column>
					</b:row>
					
					<b:row>
						<b:column>
							<b:inputText placeholder="Email Domain" id="newAccountEmailDomain" value="#{accountController.newAccount.emailDomain}" autocomplete="false">
								<f:facet name="prepend">
									<b:iconAwesome name="envelope" />
								</f:facet>
							</b:inputText>
						</b:column>
					</b:row>
					
					
					
							<b:row>
						<b:column>
							<b:inputText placeholder="Time Zone City" id="newAccountTimeZoneCity" value="#{accountController.newAccount.timeZoneCity}"
								 autocomplete="false">
								<f:facet name="prepend">
									<b:iconAwesome name="clock-o" />
								</f:facet>
							</b:inputText>
						</b:column>
					</b:row>
					
					
					
					<b:row>
						<b:column>
							<b:commandButton value="Add New Account" action="#{accountController.addAccount()}"
								look="success" style="width:100%" />
						</b:column>
					</b:row>
					
					
					
					
				</b:panel>
		</b:form>
	</b:modal>
	
	
	
	
		<!-- Add New Account Modal  -->  
	<b:modal id="EditAccountModal" title="Edit Account" styleClass="modalPseudoClass">
		<b:form id="editAccountForm">
				<b:panel title="Edit Account" look="primary">
					<b:row>
						<b:column>
							<b:inputText placeholder="Account Name" id="newAccountName" value="#{accountController.account.name}" autocomplete="false">
								<f:facet name="prepend">
									<b:icon name="user" />
								</f:facet>
							</b:inputText>
						</b:column>
					</b:row>
					
					<b:row>
						<b:column>
							<b:inputText placeholder="Email Domain" id="newAccountEmailDomain" value="#{accountController.account.emailDomain}" autocomplete="false">
								<f:facet name="prepend">
									<b:iconAwesome name="envelope" />
								</f:facet>
							</b:inputText>
						</b:column>
					</b:row>
					
					
					
							<b:row>
						<b:column>
							<b:inputText placeholder="Time Zone City" id="newAccountTimeZoneCity" value="#{accountController.account.timeZoneCity}"
								 autocomplete="false">
								<f:facet name="prepend">
									<b:iconAwesome name="clock-o" />
								</f:facet>
							</b:inputText>
						</b:column>
					</b:row>
					
					
					
					<b:row>
						<b:column>
							<b:commandButton value="Edit Account" action="#{accountController.editAccount(account)}"
								look="success" style="width:100%" />
						</b:column>
					</b:row>
					
					
					
					
				</b:panel>
		</b:form>
	</b:modal>
	
	
	
	
	
	
	
	<b:container> 
	
<b:row styleClass="">
    <b:column>
        <button id="btrigger" class="btn btn-success btn-sm" data-target="#AddNewAccountModal" data-toggle="modal">Add New Account</button>
    </b:column>
</b:row>		
		
 <h:form id="accountListForm" style="padding-top:50px">
    <b:dataTable value="#{accountController.accountsList}" var="account" page-length="5" page-length-menu="5,10,20" class="editableAccountTable">
    
        <b:dataTableColumn value="#{account.accountId}" label="ID" order="asc"  />
        <b:dataTableColumn value="#{account.name}" label="Name" />
        <b:dataTableColumn value="#{account.emailDomain}" label="Email Domain" />
        
        <b:dataTableColumn label="Time Zone City">
        	<b:inputText value="#{account.timeZoneCity}" rendered="#{account.canEdit}" />
            <h:outputText value="#{account.timeZoneCity}" rendered="#{not account.canEdit}" />
        </b:dataTableColumn>
        
        <b:dataTableColumn label="Contacts">  
        	    <a href="#{request.contextPath}/ViewContacts.xhtml?accountId=#{account.accountId}" target="_blank" class="btn btn-primary btn-small">View Contacts</a>
        </b:dataTableColumn>
        <b:dataTableColumn label="">
        	<b:commandButton value="Delete" icon="cross" action="#{accountController.deleteAccount(account.accountId)}" look="danger" />
        	<a href="#{request.contextPath}/EditAccount.xhtml?accountId=#{account.accountId}" target="_blank" class="btn btn-warning btn-small">Edit</a>
		</b:dataTableColumn> 
    </b:dataTable>
    
</h:form>


	</b:container>

</h:body>
</html>